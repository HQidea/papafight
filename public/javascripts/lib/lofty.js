!function(e){"use strict";if(!e.fmd){var t={},n=[],i=function(e){return t[e]},o=function(e,o,r){if(!t[e]){if(r||(r=o,o=[]),"function"==typeof r){for(var u=[],l=0,a=o.length;a>l;l++)u.push(i(o[l]));r=r.apply(null,u)}t[e]=r||1,n.push(e)}};o.version="0.2.5",o.cache={parts:n},o("global",e),o("require",function(){return i}),o("env",function(){return o}),o("cache",function(){return o.cache}),e.fmd=o}}(this),fmd("lang",function(){"use strict";var e={}.toString,t=Array.prototype,n={isFunction:function(t){return"[object Function]"===e.call(t)},isArray:Array.isArray||function(t){return"[object Array]"===e.call(t)},isString:function(e){return"string"==typeof e},forEach:t.forEach?function(e,t,n){e.forEach(t,n)}:function(e,t,n){for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e)},map:t.map?function(e,t,n){return e.map(t,n)}:function(e,t,i){var o=[];return n.forEach(e,function(e,n,r){o.push(t.call(i,e,n,r))}),o},inArray:t.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}};return n}),fmd("event",["env","cache"],function(e,t){"use strict";var n=t.events={},i=[].slice,o={on:function(e,t){var i=n[e]||(n[e]=[]);i.push(t)},emit:function(e){var t,o=i.call(arguments,1),r=n[e],u=0;if(r)for(;t=r[u++];)t.apply(null,o)},off:function(e,t){var i=n[e];if(i)if(t)for(var o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1);else delete n[e]}};return e.on=o.on,e.off=o.off,o}),fmd("config",["env","cache","lang"],function(e,t,n){"use strict";var i=t.config={},o=t.configRules={},r="_rule_",u=0,l=function(e,t,r){var u,l=!1;for(var a in o){if(l)break;u=o[a],l=n.inArray(u.keys,t)>-1&&void 0===u.rule.call(i,e,t,r)}return l},a={get:function(e){return i[e]},set:function(e){for(var t in e){var n=i[t],o=e[t];l(n,t,o)||(i[t]=o)}},register:function(e){var t;return n.isFunction(e.rule)&&(e.name||(e.name=r+u++),t=o[e.name]={rule:e.rule,keys:[]}),t||(t=o[e.name]),t&&e.keys&&(n.isArray(e.keys)?t.keys=t.keys.concat(e.keys):t.keys.push(e.keys)),this}};return a.register({name:"object",rule:function(e,t,n){if(!e)return!1;for(var i in n)e[i]=n[i]}}).register({name:"array",rule:function(e,t,n){e?e.push(n):this[t]=[n]}}),e.config=function(e){return n.isString(e)?a.get(e):void a.set(e)},a}),fmd("module",["global","env","cache","lang","event"],function(e,t,n,i,o){"use strict";var r,u="",l=[],a="_!_fmd_anonymous_",s=0,c=n.modules={},f={require:function(e){return e.require||d.makeRequire(e),o.emit("makeRequire",e.require,e),e.require},exports:function(e){return e.exports},module:function(e){return e.module={id:e.id,exports:e.exports},e.module}},d=function(e,t,n){var i=this;i.id=e,i.deps=t||[],i.factory=n,i.exports={},i.unnamed()&&(e=a+s,s++),i.uid=e};d.prototype={unnamed:function(){return this.id===u},extract:function(){var e=this,t=e.deps,n=[];return i.isArray(t)&&i.forEach(t,function(t){var i,o;(o=f[t])?i=o(e):(e.require||d.makeRequire(e),i=e.require(t)),n.push(i)}),n},compile:function(){var e=this;try{if(i.isFunction(e.factory)){var t=e.extract(),n=e.factory.apply(null,t);n!==r?e.exports=n:e.module&&e.module.exports&&(e.exports=e.module.exports),e.module&&delete e.module}else e.factory!==r&&(e.exports=e.factory);o.emit("compiled",e)}catch(u){o.emit("compileFailed",u,e)}},autocompile:function(){this.unnamed()&&this.compile()}},d.get=function(e){return c[e]},d.has=function(e,t){if(f[e])return!0;var n={id:e};return t&&o.emit("alias",n),c[n.id]?!0:!1},d.save=function(e){c[e.uid]=e,o.emit("saved",e),e.autocompile()},d.require=function(e){var t=d.get(e);return t?(t.compiled||(t.compiled=!0,t.compile()),o.emit("required",t),t.exports):(o.emit("requireFailed",{id:e}),null)},d.makeRequire=function(e){e.require=function(t){var n={id:t};return o.emit("relative",n,e),o.emit("alias",n),d.require(n.id)}},d.define=function(e,t,n){var r=arguments.length;return 1===r?(n=e,e=u):2===r&&(n=t,t=l,i.isString(e)||(t=e,e=u)),d.has(e,!0)?(o.emit("existed",{id:e}),null):void d.save(new d(e,t,n))},d.define.fmd={};var g=e.define;return t.noConflict=function(){e.define=g},t.define=e.define=d.define,d}),fmd("alias",["config","event"],function(e,t){"use strict";var n="alias";e.register({keys:n,name:"object"}),t.on(n,function(t){var i,o=e.get(n);o&&(i=o[t.id])&&(t.id=i)})}),fmd("relative",["lang","event","module"],function(e,t){"use strict";var n=/.*\//,i=/\/\.\//,o=/[^\/]+\/\.\.\//,r={cwd:function(e){return e.match(n)[0]},isDotStart:function(e){return"."===e.charAt(0)},hasSlash:function(e){return e.lastIndexOf("/")>0},resolve:function(e,t){for(var n=(e+t).replace(i,"/");n.match(o);)n=n.replace(o,"");return n}};return t.on("relative",function(e,t){r.isDotStart(e.id)&&t&&r.hasSlash(t.id)&&(t._cwd||(t._cwd=r.cwd(t.id)),e.id=r.resolve(t._cwd,e.id))}),r}),fmd("id2url",["global","event","config"],function(e,t,n){"use strict";var i=/^https?:\/\//i,o=(new Date).getTime(),r="resolve",u="stamp";n.set({baseUrl:function(){var t=/^\w+\:\/\/[\w\-\.:]+\//i,n=e.document.getElementsByTagName("script"),i=n[n.length-1],o=i.hasAttribute?i.src:i.getAttribute("src",4),r=o?o.match(t):null;return r?r[0]:""}()}),n.register({keys:r,name:"array"}).register({keys:u,name:"object"});var l=function(e){var t,i=n.get(r);if(i)for(var o=0,u=i.length;u>o&&(t=i[o](e.id),t===e.id);o++);e.url=t?t:e.id},a=function(e){i.test(e.url)||(e.url=n.get("baseUrl")+e.url)},s=function(e){var t=e.url;t.lastIndexOf(".")<t.lastIndexOf("/")&&(e.url+=".js")},c=function(e){var t=n.get("hasStamp")?o:null,i=n.get(u);if(i)for(var r in i)if(new RegExp(r).test(e.id)){t=i[r];break}t&&(e.url+="?fmd.stamp="+t)},f=function(e){t.emit(r,e),a(e),s(e),t.emit(u,e)};t.on(r,l),t.on(u,c),t.on("id2url",f)}),fmd("assets",["cache","lang","event","config","module"],function(e,t,n,i,o){"use strict";var r=e.assets={},u={},l={make:function(e,t){var i={id:e};return n.emit("analyze",i),n.emit("relative",i,t),n.emit("alias",i),u[i.id]?r[u[i.id]]:(o.has(i.id)?i.url=i.id:n.emit("id2url",i),u[i.id]=i.url,r[i.url]=i)},group:function(e){return t.map(e.deps,function(t){return l.make(t,e)})}};return l}),fmd("when",function(){"use strict";var e=function(){},t=function(t){var n=this,i=[],o=0,r=0;t=t||0;var u=function(){o+r===t&&l()},l=function(){n.then=r?function(e,t){t&&t()}:function(e){e&&e()},l=e,a(r?1:0),a=e,i=[]},a=function(e){for(var t,n,o=0;t=i[o++];)n=t[e],n&&n()};this.then=function(e,t){i.push([e,t])},this.resolve=function(){o++,u()},this.reject=function(){r++,u()},u()},n=function(){for(var e,n=arguments.length,i=new t(n),o=0;e=arguments[o++];)e(i);return i};return n}),fmd("request",["global","config","event"],function(e,t,n){"use strict";var i=e.document,o=e.setTimeout,r=/\.css(?:\?|$)/i,u=/loaded|complete/,l=/security|denied/i,a=/.*webkit\/?(\d+)\..*/,s=/mobile/,c="requested",f="charset",d=e.navigator.userAgent.toLowerCase(),g=d.match(a),m=g?1*g[1]<536:!1,p=m||!g&&s.test(d),y=i&&(i.head||i.getElementsByTagName("head")[0]||i.documentElement),h=function(e,o){var r;return o?(r=i.createElement("link"),r.rel="stylesheet",r.href=e.url):(r=i.createElement("script"),r.async=!0,r.src=e.url),t.get(f)&&(r.charset=t.get(f)),n.emit("createNode",r,e),r},v=function(e,t,i){var r,u,a=!1;try{r=e.sheet,r&&(u=r.cssRules,a=u?u.length>0:void 0!==u)}catch(s){a=l.test(s.message)}o(function(){a?(t&&t(),n.emit(c,i)):v(e,t,i)},20)},b=function(e,i,o,r,l){function a(){e.onload=e.onreadystatechange=e.onerror=null,l||t.get("debug")||e.parentNode&&e.parentNode.removeChild(e),e=void 0,i&&i()}o?(e.onload=function(){a(),n.emit(c,r)},e.onerror=function(){a(),n.emit("requestError",r)}):e.onreadystatechange=function(){u.test(e.readyState)&&(a(),n.emit(c,r))}},k=function(e,t,n,i){return!n||p?void o(function(){v(e,t,i)},1):void b(e,t,n,i,!0)},q=function(e,t){var n=r.test(e.url),i=h(e,n),o="onload"in i;n?k(i,t,o,e):b(i,t,o,e),y.appendChild(i)};return q}),fmd("loader",["global","event","config","request"],function(e,t,n,i){"use strict";var o="loading",r="loaded",u="requestComplete",l=function(){};n.set({timeout:1e4}),t.on(u,function(e){var t,n;for(e.state=r,n=e.onload;t=n.shift();)t()});var a=function(a,s){return s||(s=l),a.state===r?void s():a.state===o?void a.onload.push(s):(a.state=o,a.onload=[s],t.emit("request",a,s),void(a.requested||(a.timer=e.setTimeout(function(){t.emit("requestTimeout",a)},n.get("timeout")),i(a,function(){e.clearTimeout(a.timer),t.emit(u,a)}))))};return a}),fmd("remote",["lang","event","module","assets","when","loader"],function(e,t,n,i,o,r){"use strict";var u={};return u.bring=u.get=function(t,i){o.apply(null,e.map(t,function(e){return function(t){n.has(e.id)?t.resolve():r(e,function(){t.resolve()})}})).then(i)},u.fetch=function(r,l){var a=i.group(r);t.emit("fetch",a),u.bring(a,function(){o.apply(null,e.map(a,function(e){return function(t){var i=n.get(e.id);i&&!i.compiled&&i.deps.length?u.fetch(i,function(){t.resolve()}):t.resolve()}})).then(function(){l.call(null,a)})})},u}),fmd("use",["lang","event","module","remote"],function(e,t,n,i){"use strict";t.on("makeRequire",function(t,o){t.use=function(t,r){e.isArray(t)||(t=[t]),i.fetch({id:o.id,deps:t},function(t){var i=e.map(t,function(e){return n.require(e.id)});r&&r.apply(null,i)})}})}),fmd("async",["config","module","remote"],function(e,t,n){"use strict";var i=t.prototype.autocompile,o=function(){var e=this;e.unnamed()&&n.fetch(e,function(){e.compile()})};e.register({keys:"async",rule:function(e,n,r){r=!!r,e!==r&&(this.async=r,t.prototype.autocompile=r===!0?o:i)}}).set({async:!0})}),fmd("logger",["global","require","env","config","assets","loader","console"],function(e,t,n,i,o,r,u){"use strict";var l=n.log=function(){},a=e.console,s=function(e){n.log=e?a&&a.warn?function(e,t){a[t||"log"](e)}:function(e,n){u?u(e,n):r&&r(o.make("fmd/console"),function(){u||(u=t("console")),u(e,n)})}:l};i.register({keys:"debug",rule:function(e,t,n){s(n),this.debug=n}})}),fmd("plugin",["cache","lang","event","config","when","remote"],function(e,t,n,i,o,r){"use strict";var u=e.plugin={},l=/(.+)!(.+)/,a="analyze",s={defaultPlugin:"async",register:function(e,t){u[e]=t},sorting:function(e){var n,i,o=[],r={};return t.forEach(e,function(e){r[e.plugin]>-1?i=o[r[e.plugin]]:(n=r[e.plugin]=o.length,i=o[n]={group:[],execute:u[e.plugin]}),i.group.push(e)}),o}};s.register(s.defaultPlugin,function(e){r.get(this.group,e)});var c=function(e){var t=e.id.match(l);t&&(e.plugin=t[1],e.id=t[2]),!u[e.plugin]&&(e.plugin=s.defaultPlugin)},f=function(e,n){o.apply(null,t.map(s.sorting(e),function(e){return function(t){e.execute?e.execute(function(){t.resolve()}):t.resolve()}})).then(n)};return i.register({keys:"plugin",rule:function(e,t,i){i=!!i,e!==i&&(this.plugin=i,i===!0?(n.on(a,c),r.bring=f):(n.off(a,c),r.bring=r.get))}}).set({plugin:!0}),s}),fmd("preload",["global","lang","event","when","request","loader"],function(e,t,n,i,o,r){"use strict";var u=e.document,l="async"in u.createElement("script")||"MozAppearance"in u.documentElement.style||e.opera,a="text/cache-javascript",s="preloading",c="preloaded";n.on("createNode",function(e,t){t.isPreload&&(e.async=!1,e.defer=!1,!l&&(e.type=a))}),n.on("request",function(e,t){e.preState&&(e.preState===s?(e.onpreload.push(function(){r(e,t)}),delete e.state,e.requested=!0):(delete e.requested,delete e.isPreload))});var f=function(e){e.preState||(e.preState=s,e.onpreload=[],o(e,function(){e.preState=c,t.forEach(e.onpreload,function(e){e()})}))},d=function(e,n){i.apply(null,t.map(e,function(e){return function(t){e.isPreload=!0,r(e,function(){t.resolve()})}})).then(n)},g=function(e,n){var i=e.slice(1);i.length?(t.forEach(e,function(e){e.isPreload||(e.isPreload=!0,f(e))}),r(e[0],function(){m(i,n)})):r(e[0],n)},m=function(e,t){(m=l?d:g)(e,t)};return m}),fmd("non",["plugin","preload"],function(e,t){"use strict";e.register("non",function(e){t(this.group,e)})}),fmd("combo",["cache","lang","event","config","module","assets","plugin","when","loader","preload"],function(e,t,n,i,o,r,u,l,a,s){"use strict";var c=e.combo={},f="async",d="non",g="_combo",m="_combo_non",p="comboSyntax",y="comboMaxLength",h="fetch",v=/\.css(?:\?|$)/i,b=/(^\w+\:\/\/[\w\-\.:]+\/)(.+)/i,k=["??",","],q=1500,w=function(e){var t=k[0],n=k[1];return t&&e.indexOf(t)>0||n&&e.indexOf(n)>0},x=function(e){return e.substring(e.lastIndexOf("."))},j=function(e,t){var n=e.match(b);t._host=n[1],t._path=n[2]},E=function(e){var t=e.url.split("?fmd.stamp")[0],n=x(t);return j(t,e),[n,e._host].join("_")},_=function(e,t){if(e.included.length>1||e.plugin===m)n.emit("stamp",e),c[e.url]=e,t.push(e);else{var i=e.included[0];delete i.requested}},S=function(e,t){return e.url+k[e.url===t._host?0:1]+t._path},A=function(e){if(!(e.length<2)){i.get(p)&&(k=i.get(p)),i.get(y)&&(q=i.get(y));for(var n,u,l=[],a=0;a<e.length;a++)n=e[a],n.plugin!==f&&n.plugin!==d||n.comboed||n.state||n.preState||(!v.test(n.url)||w(n.url)?n.url!==n.id?w(n.url)||l.push(n):(u=o.get(n.id),u&&!u.compiled&&t.forEach(u.deps,function(t){e.push(r.make(t,u))})):l.push(n));l.length&&z(l,e)}},z=function(e,n){var i,o,r,u,l={},a=function(e,t){var n=l[e]={url:t._host,plugin:g,included:[]};return n};t.forEach(e,function(e){i=E(e),o=l[i]||a(i,e),r=S(o,e),r.length>q&&(_(o,n),delete l[i],o=a(i,e),r=S(o,e)),o.url=r,o.included.push(e),e.plugin===d&&(o.plugin=m,e.plugin=f),e.comboed=!0,e.requested=!0});for(u in l)_(l[u],n)},O=function(e){t.forEach(e.included,function(e){n.emit("requestComplete",e)})},C=function(e){l.apply(null,t.map(this.group,function(e){return function(t){a(e,function(){O(e),t.resolve()})}})).then(e)},F=function(e){var n=this.group;s(n,function(){t.forEach(n,function(e){O(e)}),e()})};i.register({keys:"combo",rule:function(e,t,i){i=!!i,e!==i&&(this.combo=i,i===!0?(n.on(h,A),u.register(g,C),u.register(m,F)):(n.off(h,A),u.register(g,null),u.register(m,null)))}}).set({combo:!0})}),function(e){if(!e.lofty){var t=function(t){e[t]={define:fmd.define,log:function(){fmd.log.apply(null,arguments)},config:fmd.config,on:fmd.on,off:fmd.off}};t("lofty");var n=e.lofty;n.appframe=t,n.cache=fmd.cache;var i=/([a-z])([A-Z])/g;n.on("resolve",function(e){e.url=e.url.replace(i,function(e,t,n){return t+"-"+n}).toLowerCase()});var o=/\.art$/;n.on("resolve",function(e){o.test(e.url)&&(e.url+=".js")}),n.on("existed",function(e){n.log(e.id+": already exists.","error")}),n.on("compiled",function(e){n.log(e.uid+": compiled.")}),n.on("compileFailed",function(e){if(!n.config("hasCatch")||n.config("debug"))throw e}),n.on("required",function(e){e.visits?e.visits++:e.visits=1,n.log(e.id+": required "+e.visits+".")}),n.on("requireFailed",function(e){e.truth=!0,(!e.id||e.id.indexOf(".css")>0)&&(e.truth=!1),e.truth&&n.log(e.id+": not found!","error")}),n.on("requested",function(e){n.log(e.url+" requested.")}),n.on("requestTimeout",function(e){n.log("request "+e.url+" timeout!","error")});var r=/^https?:\/\//i,u=/\.css(?:\?|$)/;n.config({plugin:!1,combo:!1,resolve:function(e){if(r.test(e))return!1;var t=e.split("/"),n=t[0],i=u.test(e)?"css/":"js/";switch(n){case"lofty":case"lofty-mobile":case"gallery":e="fdevlib/"+i+e;break;case"sys":e="sys/"+i+t.slice(1).join("/");break;case"fmd":e="fdevlib/"+i+"lofty/port/fmdjs/"+e}return e},debug:function(){return e.location.href.indexOf("lofty.debug=true")>0}()}),n.config({alias:{"lofty/observer":"lofty/lang/observer","lofty/base":"lofty/lang/base","lofty/class":"lofty/lang/class","lofty/log":"lofty/lang/log","lofty/aop":"lofty/lang/aop","fui/widget/1.0":"lofty/ui/widget/1.0/widget","fui/tabs/1.0":"lofty/ui/tabs/1.0/tabs","fui/tabs/2.0":"lofty/ui/tabs/2.0/tabs","fui/tip/1.0":"lofty/ui/tip/1.0/tip","fui/autocomplete/1.0":"lofty/ui/autocomplete/1.0/autocomplete","fui/autorender/1.0":"lofty/ui/autorender/1.0/autorender","fui/suggestion/1.0":"lofty/ui/suggestion/1.0/suggestion","fui/suggestion-all/1.0":"lofty/ui/suggestion/1.0/suggestion-all","fui/progressbar/1.0":"lofty/ui/progressbar/1.0/progressbar","fui/placeholder/1.0":"lofty/ui/placeholder/1.0/placeholder","fui/paging/1.0":"lofty/ui/paging/1.0/paging","fui/combobox/1.0":"lofty/ui/combobox/1.0/combobox","fui/flash/1.0":"lofty/ui/flash/1.0/flash","fui/flashchart/1.0":"lofty/ui/flashchart/1.0/flashchart","fui/flashuploader/1.0":"lofty/ui/flashuploader/1.0/flashuploader","fui/clipboard/1.0":"lofty/ui/flashclipboard/1.0/flashclipboard","fui/mouse/1.0":"lofty/ui/sortable/1.0/mouse","fui/sortable/1.0":"lofty/ui/sortable/1.0/sortable","fui/dragdrop/1.0":"lofty/ui/dragdrop/1.0/dragdrop","fui/dialog/1.0":"lofty/ui/dialog/1.0/dialog","fui/position/1.0":"lofty/ui/position/1.0/position","fui/timer/1.0":"lofty/ui/timer/1.0/timer","fui/sidebar/2.0":"lofty/ui/sidebar/2.0/sidebar","fui/datepicker/1.0":"lofty/ui/datepicker/1.0/datepicker","fui/qrcode/1.0":"lofty/ui/qrcode/1.0/qrcode","util/cookie/1.0":"lofty/util/cookie/1.0/cookie","util/websocket/1.0":"lofty/util/websocket/1.0/websocket","util/storage/1.0":"lofty/util/storage/1.0/storage","util/misc/1.0":"lofty/util/misc/1.0/misc","util/history/1.0":"lofty/util/history/1.0/history","util/template/1.0":"lofty/util/template/1.0/template","util/template/2.0":"lofty/util/template/2.0/template","util/history-manager/1.0":"lofty/util/history/1.0/history-manager","util/datalazyload/1.0":"lofty/util/datalazyload/1.0/datalazyload","util/datalazyload/2.0":"lofty/util/datalazyload/2.0/datalazyload","util/date/1.0":"lofty/util/date/1.0/date","util/misc/2.0":"lofty/util/misc/2.0/misc","util/string/1.0":"lofty/util/string/1.0/string","util/webp/1.0":"lofty/util/webp/1.0/webp","util/exposure/1.0":"lofty/util/exposure/1.0/exposure","util/messenger/1.0":"lofty/util/messenger/1.0/messenger","util/cms-vm/1.0":"lofty/util/cms-vm/1.0/cms-vm","util/cms-vm-jsonp/1.0":"lofty/util/cms-vm/1.0/cms-vm-jsonp","util/localstorage/1.0":"lofty/util/localstorage/1.0/localstorage","alicn/now/1.0":"lofty/alicn/now/1.0/now","alicn/now/2.0":"lofty/alicn/now/2.0/now","alicn/geoinfo/1.0":"lofty/alicn/geoinfo/1.0/geoinfo","alicn/subcookie/1.0":"lofty/alicn/subcookie/1.0/subcookie","alicn/monitor/1.0":"lofty/alicn/monitor/1.0/monitor","alicn/aliuser/1.0":"lofty/alicn/aliuser/1.0/aliuser","alicn/alitalk/1.0":"lofty/alicn/alitalk/1.0/alitalk","alicn/alitalk-shunt/1.0":"lofty/alicn/alitalk/1.0/alitalk-shunt","sys/alibar/1.0":"sys/universal/alibar/standard-v5","sys/logist/1.0":"sys/logist/logist-fdev5"}}),e.jQuery&&(define("gallery/jquery/jqueryLatest",function(){return jQuery}),n.config({alias:{jquery:"gallery/jquery/jqueryLatest"}})),e.af&&(define("gallery/appframework/appframework",function(){return af}),n.config({alias:{jquery:"gallery/appframework/appframework"}})),e.lofty&&(e.lofty.test={})}}(this);